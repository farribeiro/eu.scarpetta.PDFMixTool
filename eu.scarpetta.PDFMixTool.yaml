app-id: eu.scarpetta.PDFMixTool
runtime: org.kde.Platform
runtime-version: "5.15"
sdk: org.kde.Sdk
command: pdfmixtool
finish-args:
  - --share=ipc
  - --socket=x11
  - --socket=wayland
  - --device=dri
  - --filesystem=host
modules:
  - name: qpdf
    buildsystem: simple
    build-commands:
      - "./configure --prefix=/ --disable-static"
      - "make -j $FLATPAK_BUILDER_N_JOBS"
      - "make DESTDIR=$FLATPAK_DEST install"
    sources:
      - type: archive
        url: https://github.com/qpdf/qpdf/releases/download/release-qpdf-10.3.2/qpdf-10.3.2.tar.gz
        sha256: 062808c40ef8741ec8160ae00168638a712cfa1d4bf673e8e595ab5eba1da947
    cleanup:
      - /include
      - /bin

  - name: pdfmixtool
    buildsystem: cmake-ninja
    config-opts:
      - -DCMAKE_BUILD_TYPE=Release
    sources:
      - type: archive
        url: https://gitlab.com/scarpetta/pdfmixtool/-/archive/1e56c24f7267f02af06c8fe77fd2d71ee75979cf/pdfmixtool-1e56c24f7267f02af06c8fe77fd2d71ee75979cf.tar.gz
        sha256: 1aac6c62d0c4c95c47b63ae9ca1346841b2feed487c01d1117f73cfdb4d84050
